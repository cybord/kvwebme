window.form_input_types=["input box","email","textarea","date","checkbox","selectbox","hidden","ccdate"];function formfieldsAddRow(){formfieldElements++,$("<li><table width=\"100%\"><tr><td width=\"30%\"><input name=\"formfieldElementsName["+formfieldElements+"]\" /></td><td width=\"30%\"><select name=\"formfieldElementsType["+formfieldElements+"]\"><option>"+form_input_types.join("</option><option>")+"</option></select></td><td width=\"10%\"><input type=\"checkbox\" name=\"formfieldElementsIsRequired["+formfieldElements+"]\" /></td><td></td></tr></table></li>").appendTo($("#form_fields")),$("#form_fields").sortable(),$("#form_fields input,#form_fields select,#form_fields textarea").bind("click.sortable mousedown.sortable",function(a){a.target.focus()})}function form_export(a){if(!a)return alert("cannot export from an empty form database");if(!(+$("select[name=\"page_vars\\[forms_record_in_db\\]\"]").val()))return alert("this form doesn't record to database");var b=$("#export_from").val();document.location="/ww.plugins/forms/admin/export.php?date="+b+"&id="+a}if(!formfieldElements)var formfieldElements=0;$(function(){function a(){var a=$("#form-replyto"),b=a.val(),c=[];$("#form_fields select").each(function(){var a=$(this).val(),b;if(a!="email")return;b=$(this).closest("tr").find("input")[0].value;if(b=="")return;c.push(b)}),a.html("<option>"+c.join("</option><option>")+"</option>").val(b)}formfieldsAddRow(),$(".date").datepicker({dateFormat:"yy-m-d"}),$("#tabs").tabs(),$("#pages_form").submit(function(){a();if(!$("#form-replyto").val()){alert("the Reply-To on the Main Details tab must correspond to an Email field in the Form Fields tab");return false}}),$("#form_fields select").live("change",a)})
